# 云数据库初始化说明

## 创建集合（Collection）

在微信开发者工具的云开发控制台中，需要创建以下两个集合：

### 1. rooms 集合
用于存储房间信息

**字段说明：**
- `_id`: String - 房间ID（6位字母数字组合）
- `max_players`: Number - 最大人数（5-10）
- `status`: String - 房间状态（'waiting' 或 'started'）
- `created_at`: Date - 创建时间
- `updated_at`: Date - 更新时间

**索引：**
- `_id` 为主键索引（自动创建）

### 2. players 集合
用于存储玩家信息

**字段说明：**
- `_id`: String - 玩家记录ID（自动生成）
- `room_id`: String - 所属房间ID
- `player_number`: Number - 玩家编号（1, 2, 3...）
- `nickname`: String - 玩家昵称
- `letter`: String - 分配的字母（A, B, C...）
- `joined_at`: Date - 加入时间

**索引：**
- `room_id` - 建议创建索引以提高查询性能
- `player_number` - 建议创建索引以提高排序性能

## 创建步骤

1. 打开微信开发者工具
2. 点击顶部菜单 **云开发** -> **云开发控制台**
3. 在左侧菜单选择 **数据库**
4. 点击 **+** 创建集合
5. 创建 `rooms` 集合
6. 创建 `players` 集合

## 权限设置

### rooms 集合权限
建议设置为：**仅创建者可读写，所有人可读**

### players 集合权限
建议设置为：**仅创建者可读写，所有人可读**

或者更安全的设置：
- **仅创建者可读写**
- 通过云函数进行所有读写操作（当前实现方式）

## 注意事项

1. 集合名称必须完全匹配：`rooms` 和 `players`（区分大小写）
2. 字段类型要正确：数字字段使用 Number，日期字段使用 Date
3. 云函数会自动创建数据，无需手动插入测试数据
