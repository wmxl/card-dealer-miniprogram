<!--pages/role-reveal/role-reveal.wxml-->
<view class="container">
  <!-- è§„åˆ™æŒ‰é’® -->
  <view class="rules-btn" bindtap="showRules">
    <text>ğŸ“– è§„åˆ™</text>
  </view>

  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view wx:else class="content">
    <!-- ç©å®¶ä¿¡æ¯ -->
    <view class="player-info">
      <text class="player-label">ç©å®¶ç¼–å·</text>
      <text class="player-number">{{playerNumber}}</text>
      <text class="player-name">{{nickname || 'ç©å®¶' + playerNumber}}</text>
    </view>

    <!-- è§’è‰²å¡ç‰‡ -->
    <view class="role-card {{role.side}}">
      <view class="role-header">
        <text class="role-name">{{role.name}}</text>
        <text class="role-side">{{role.side === 'good' ? 'å¥½äººé˜µè¥' : 'åäººé˜µè¥'}}</text>
      </view>

      <view class="role-message">
        <text>{{message}}</text>
      </view>

      <!-- å¯è§ç©å®¶åˆ—è¡¨ -->
      <view wx:if="{{seePlayers.length > 0}}" class="see-players">
        <view class="see-player-item" wx:for="{{seePlayers}}" wx:key="playerNumber">
          <text class="see-player-number">{{item.playerNumber}}å·</text>
          <text class="see-player-name">{{item.nickname || 'ç©å®¶' + item.playerNumber}}</text>
          <text wx:if="{{item.role}}" class="see-player-role">ï¼ˆ{{item.role}}ï¼‰</text>
        </view>
      </view>

      <view wx:if="{{tip}}" class="role-tip">
        ğŸ’¡ {{tip}}
      </view>
    </view>

    <!-- ç¡®è®¤æŒ‰é’® -->
    <view class="actions">
      <button
        class="btn btn-confirm"
        bindtap="confirmRole"
        disabled="{{confirmed}}"
      >
        {{confirmed ? 'å·²ç¡®è®¤' : 'ç¡®è®¤èº«ä»½ï¼Œå¼€å§‹æ¸¸æˆ'}}
      </button>
    </view>

    <!-- æç¤º -->
    <view class="warning">
      âš ï¸ è¯·å‹¿è®©å…¶ä»–ç©å®¶çœ‹åˆ°ä½ çš„è§’è‰²ä¿¡æ¯
    </view>
  </view>

  <!-- è§„åˆ™å¼¹çª— -->
  <rules-modal show="{{showRulesModal}}" bind:close="hideRules"></rules-modal>
</view>
